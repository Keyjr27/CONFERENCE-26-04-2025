<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>üéüÔ∏è Acc√®s Conf√©rence</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      background: linear-gradient(to right, #e0f2f1, #f1f8e9);
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      padding: 20px;
    }

    .logos {
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 30px;
      margin-top: 50px;
      gap: 20px;
    }

    .logos img {
      height: 60px;
      border-radius: 10px;
    }

    .ampersand {
      font-size: 32px;
      font-weight: bold;
      color: #004d40;
    }

    h1 {
      color: #00695C;
      font-size: 26px;
      margin-bottom: 20px;
      text-align: center;
    }

    .card {
      background-color: white;
      padding: 30px;
      border-radius: 16px;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
      text-align: center;
      max-width: 450px;
      width: 100%;
    }

    input {
      padding: 12px;
      margin: 10px 0 15px -11px;
      width: 100%;
      font-size: 16px;
      border: 2px solid #b2dfdb;
      border-radius: 8px;
    }

    button {
      padding: 12px 30px;
      background-color: #00796B;
      color: white;
      font-size: 16px;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      transition: background 0.3s ease, transform 0.2s ease;
      margin-top: 10px;
    }

    button:hover {
      background-color: #004d40;
      transform: scale(1.02);
    }

    #result {
      margin-top: 20px;
      font-size: 18px;
      font-weight: bold;
      opacity: 0;
      transition: opacity 0.4s ease;
    }

    #result.show {
      opacity: 1;
    }

    .loader {
      border: 5px solid #f3f3f3;
      border-top: 5px solid #00796B;
      border-radius: 50%;
      width: 30px;
      height: 30px;
      animation: spin 1s linear infinite;
      margin: 20px auto;
      display: none;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
</head>
<body>

  <div class="logos">
    <img src="https://scontent.fabj1-1.fna.fbcdn.net/v/t39.30808-6/384339925_122093647208069768_5190369814063225984_n.jpg?_nc_cat=111&ccb=1-7&_nc_sid=6ee11a&_nc_eui2=AeE802jN3GVzVr9_f7CymXf479WC8VTtDgbv1YLxVO0OBgqvVO-9r_dihhLCXMulJ6SqL2ipxs4DorknP-H_Jbo4&_nc_ohc=fOGzd2vxALEQ7kNvwFjFbTR&_nc_oc=AdkULpx6XNL3WnteRYDbwFSQfukrdtc4FwQVGQh9W561npD4VwHQ4olHst7SV9YXSbg&_nc_zt=23&_nc_ht=scontent.fabj1-1.fna&_nc_gid=BaDBjuvK-BImsmknNMMpUg&oh=00_AfGJseZgED2fqdRIKpakPHeEnDsUwOduAg3GOJDn6L7kJg&oe=680FDA19" alt="Logo CVY1">
    <span class="ampersand">&</span>
    <img src="https://scontent.fabj1-1.fna.fbcdn.net/v/t39.30808-1/341767162_1313450276249762_2012166118091470722_n.jpg?stp=cp0_dst-jpg_s60x60_tt6&_nc_cat=103&ccb=1-7&_nc_sid=2d3e12&_nc_eui2=AeFBoirTggBBYAflzGVvN1pBUB2JNN90oytQHYk033SjKx7ge3E9H78XPAuwDgWSRagG2OrSViKOpXxUgnMto3m1&_nc_ohc=uOgNa5fqdVQQ7kNvwHgepte&_nc_oc=AdnfNoFrwiOfDVyOju1vmtM9VUzflCKCqRDtI4SLkM1RfmuhFj_RQDHjtOQnfUQ-toQ&_nc_zt=24&_nc_ht=scontent.fabj1-1.fna&_nc_gid=MT_x2Vc7Chdj6faUG7f1eg&oh=00_AfHCVUGqHPGKhP9zPW218A45lfTzdmbGOyZWGiJDue6nUQ&oe=680FE8F0" alt="Logo Ilimi Group">
  </div>

  <div class="card">
    <h1>V√©rifie ton acc√®s √† la conf√©rence</h1>
    <input type="email" id="email" placeholder="Votre adresse email inscrit lors de votre inscription" />
    <br>
    <button onclick="verifier()">V√©rifier mon inscription</button>
    <div class="loader" id="loader"></div>
    <div id="result"></div>
  </div>

  <script>
    async function verifier() {
      const email = document.getElementById('email').value.trim();
      const resultDiv = document.getElementById('result');
      const loader = document.getElementById('loader');

      resultDiv.classList.remove('show');
      resultDiv.style.color = 'black';

      if (!email) {
        resultDiv.innerHTML = '‚ùó Merci de renseigner ton email.';
        resultDiv.style.color = 'red';
        resultDiv.classList.add('show');
        return;
      }

      resultDiv.innerHTML = '';
      loader.style.display = 'block';

      try {
        const response = await fetch(`https://script.google.com/macros/s/AKfycbx_vYLLbQPkmQ8vOMwuGs3S6zPbaF1BtCFdgiW687FLLF7Br4HjaOfJYtzP9kOutn_9/exec?mail=${encodeURIComponent(email)}`);
        const data = await response.json();

        loader.style.display = 'none';

        if (data.status === 'ok') {
          const nom = encodeURIComponent(data.nom);
          const prenom = encodeURIComponent(data.prenom);

          resultDiv.innerHTML = `‚úÖ Bienvenue ${data.prenom} ${data.nom} ! Redirection en cours...`;
          resultDiv.style.color = 'green';
          resultDiv.classList.add('show');

          setTimeout(() => {
            window.location.href = `https://codepen.io/Keyjr27/full/XJJMobB?nom=${nom}&prenom=${prenom}`;
          }, 2000);
        } else {
          resultDiv.innerHTML = data.message || "‚ùå Adresse non reconnue.";
          resultDiv.style.color = 'red';
          resultDiv.classList.add('show');
        }

      } catch (error) {
        loader.style.display = 'none';
        resultDiv.innerHTML = '‚ùå Erreur de connexion. R√©essaie plus tard.';
        resultDiv.style.color = 'red';
        resultDiv.classList.add('show');
      }
    }
  </script>
</body>
</html>
